version: '2.4'

services:
  speculos:
    # Speculos isn't supported for Mac M1 yet. You have to build the image locally as described in the README.
    # Otherwise you can use the official image
    # image: ghcr.io/ledgerhq/speculos:latest
    image: speculos:latest
    volumes:
      - ./lib/tmp:/speculos/apps
    ports:
      - "${API_PORT}:${API_PORT}"
    build:
      context: /speculos
    command: --model nanox ./apps/app.elf --seed="${SEED}" --display headless --api-port ${API_PORT}
