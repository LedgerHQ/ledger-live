## hw-trustchain

Ledger Live trustchain hardware layer.

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [APDU](#apdu)
*   [createApduDevice](#createapdudevice)
    *   [Parameters](#parameters)
*   [Command](#command)
*   [CommandType](#commandtype)
*   [Permissions](#permissions)
*   [Seed](#seed)
    *   [Parameters](#parameters-1)
*   [Derive](#derive)
    *   [Parameters](#parameters-2)
*   [AddMember](#addmember)
    *   [Parameters](#parameters-3)
*   [PublishKey](#publishkey)
    *   [Parameters](#parameters-4)
*   [EditMember](#editmember)
    *   [Parameters](#parameters-5)
*   [CloseStream](#closestream)
*   [CommandBlock](#commandblock)
*   [createCommandBlock](#createcommandblock)
    *   [Parameters](#parameters-6)
*   [createCommandBlock](#createcommandblock-1)
    *   [Parameters](#parameters-7)
*   [signCommandBlock](#signcommandblock)
    *   [Parameters](#parameters-8)
*   [hashCommandBlock](#hashcommandblock)
    *   [Parameters](#parameters-9)
*   [verifyCommandBlock](#verifycommandblock)
    *   [Parameters](#parameters-10)
*   [CommandIssuer](#commandissuer)
*   [CommandStreamIssuer](#commandstreamissuer)
    *   [Parameters](#parameters-11)
*   [CommandStream](#commandstream)
    *   [Parameters](#parameters-12)
*   [CommandStream](#commandstream-1)
*   [Crypto](#crypto)
*   [crypto](#crypto-1)
*   [Device](#device)
    *   [isPublicKeyAvailable](#ispublickeyavailable)
    *   [readKey](#readkey)
        *   [Parameters](#parameters-13)
*   [createDevice](#createdevice)
*   [CommandStreamJsonifier](#commandstreamjsonifier)
*   [device](#device-1)
*   [ApplicationStreams](#applicationstreams)
*   [StreamTreeCreateOpts](#streamtreecreateopts)
*   [PublishKeyEvent](#publishkeyevent)
*   [StreamTree](#streamtree)
    *   [Parameters](#parameters-14)
    *   [share](#share)
        *   [Parameters](#parameters-15)
*   [StreamTreeCipherMode](#streamtreeciphermode)
*   [StreamTreeCipher](#streamtreecipher)
    *   [Parameters](#parameters-16)
    *   [encrypt](#encrypt)
        *   [Parameters](#parameters-17)
    *   [decrypt](#decrypt)
        *   [Parameters](#parameters-18)

### APDU

### createApduDevice

#### Parameters

*   `transport` **Transport**&#x20;

Returns **ApduDevice**&#x20;

### Command

### CommandType

### Permissions

### Seed

#### Parameters

*   `topic` **([Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array) | null)**&#x20;
*   `protocolVersion` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;
*   `groupKey` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `initializationVector` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `encryptedXpriv` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `ephemerPublicKey` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;

### Derive

#### Parameters

*   `path` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>**&#x20;
*   `groupKey` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `initializationVector` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `encryptedXpriv` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `ephemeralPublicKey` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;

### AddMember

#### Parameters

*   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `publicKey` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `permissions` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

### PublishKey

#### Parameters

*   `initializationVector` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `encryptedXpriv` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `recipient` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `ephemeralPublicKey` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;

### EditMember

#### Parameters

*   `member` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `name` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | null)**&#x20;
*   `permissions` **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | null)**&#x20;

### CloseStream

### CommandBlock

### createCommandBlock

Create a new command block.

#### Parameters

*   `issuer` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)** The public key of the command block issuer
*   `commands` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Command](#command)>** The list of commands in this command block
*   `signature` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)** The signature of the command block (by default the block is not signed) (optional, default `new Uint8Array()`)
*   `parent` **([Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array) | null)** The parent command block hash (if null, the block is the first block and a parent will be generated) (optional, default `null`)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[CommandBlock](#commandblock)>**&#x20;

### createCommandBlock

#### Parameters

*   `issuer` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `commands` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Command](#command)>**&#x20;
*   `signature` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**  (optional, default `new Uint8Array()`)
*   `parent` **([Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array) | null)**  (optional, default `null`)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[CommandBlock](#commandblock)>**&#x20;

### signCommandBlock

#### Parameters

*   `block` **[CommandBlock](#commandblock)**&#x20;
*   `issuer` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `secretKey` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[CommandBlock](#commandblock)>**&#x20;

### hashCommandBlock

#### Parameters

*   `block` **[CommandBlock](#commandblock)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)>**&#x20;

### verifyCommandBlock

#### Parameters

*   `block` **[CommandBlock](#commandblock)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)>**&#x20;

### CommandIssuer

Type: function (device: [Device](#device), tempStream: [CommandStream](#commandstream), streamTree: ([StreamTree](#streamtree) | null)): [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Command](#command)>>

### CommandStreamIssuer

#### Parameters

*   `stream` **[CommandStream](#commandstream)**&#x20;

### CommandStream

#### Parameters

*   `blocks` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[CommandBlock](#commandblock)>**  (optional, default `[]`)

### CommandStream

**Extends CS.default**

### Crypto

### crypto

Type: [Crypto](#crypto)

### Device

#### isPublicKeyAvailable

Checks wether the public key can be directly fetched or if acquiring the public key
requires a user action.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** True if the public key is directly available, false otherwise

#### readKey

Read the symmetric key from the stream tree at the given path. This function may not be implemented by all devices.

##### Parameters

*   `tree` **[StreamTree](#streamtree)** The stream tree
*   `path` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>** The path to the key

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)>** The public key of the symmetric key

### createDevice

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Device](#device)>**&#x20;

### CommandStreamJsonifier

**Extends Jsonifier**

### device

### ApplicationStreams

### StreamTreeCreateOpts

### PublishKeyEvent

### StreamTree

#### Parameters

*   `tree` **IndexedTree<[CommandStream](#commandstream)>**&#x20;

#### share

Share a private key with a member

##### Parameters

*   `path` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>)**&#x20;
*   `owner` **[Device](#device)**&#x20;
*   `member` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `permission` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[StreamTree](#streamtree)>**&#x20;

### StreamTreeCipherMode

### StreamTreeCipher

#### Parameters

*   `mode` **[StreamTreeCipherMode](#streamtreeciphermode)**&#x20;
*   `device` **[Device](#device)**&#x20;

#### encrypt

Encrypts a message for a given path in the tree

##### Parameters

*   `tree` **[StreamTree](#streamtree)**&#x20;
*   `path` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>**&#x20;
*   `message` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;
*   `nonce` **([Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array) | null)** optional nonce to use for the encryption (if null a random nonce will be generated) (optional, default `null`)

<!---->

*   Throws **any** Error if the cipher mode is not implemented
*   Throws **any** Error if the path is not found in the tree and can't be derived from the device

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)>** the encrypted message with the nonce prepended (1 byte for the nonce length + nonce + 33 bytes ephemeral key + encrypted message + 4 bytes checksum)

#### decrypt

Decrypts a message for a given path in the tree

##### Parameters

*   `tree` **[StreamTree](#streamtree)**&#x20;
*   `path` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>**&#x20;
*   `encrytedPayload` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;

<!---->

*   Throws **any** Error if the cipher mode is not implemented
*   Throws **any** Error if the path is not found in the tree and can't be derived from the device
*   Throws **any** Error if the checksum is invalid

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)>** the decrypted message
