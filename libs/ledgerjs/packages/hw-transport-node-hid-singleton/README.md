<img src="https://user-images.githubusercontent.com/4631227/191834116-59cf590e-25cc-4956-ae5c-812ea464f324.png" height="100" />

[GitHub](https://github.com/LedgerHQ/ledger-live/),
[Ledger Devs Discord](https://developers.ledger.com/discord-pro),
[Developer Portal](https://developers.ledger.com/)

## @ledgerhq/hw-transport-node-hid-singleton

Allows to communicate with Ledger Hardware Wallets.

**\[Node]**/Electron **(HID)** – uses `node-hid` and `node-usb`. Keep transport opened and re-use it as a singleton, one device at a time on a computer but more robust implementation.

***

## Are you adding Ledger support to your software wallet?

You may be using this package to open a USB connection between your desktop application and the device.

For a smooth and quick integration:

*   See the developers’ documentation on the [Developer Portal](https://developers.ledger.com/docs/transport/overview/) and
*   Go on [Discord](https://developers.ledger.com/discord-pro/) to chat with developer support and the developer community.

***

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [TransportNodeHidSingleton](#transportnodehidsingleton)
    *   [Parameters](#parameters)
    *   [Examples](#examples)
    *   [exchange](#exchange)
        *   [Parameters](#parameters-1)
    *   [isSupported](#issupported)
    *   [list](#list)
    *   [listen](#listen)
        *   [Parameters](#parameters-2)
    *   [autoDisconnect](#autodisconnect)
    *   [disconnect](#disconnect)
    *   [open](#open)
        *   [Parameters](#parameters-3)

### TransportNodeHidSingleton

**Extends TransportNodeHidNoEvents**

node-hid Transport implementation

#### Parameters

*   `device` **HID.HID** 
*   `$1` **{context: TraceContext?}**  (optional, default `{}`)

    *   `$1.context`  

#### Examples

```javascript
import TransportNodeHid from "@ledgerhq/hw-transport-node-hid-singleton";
...
TransportNodeHid.create().then(transport => ...)
```

#### exchange

Exchange with the device using APDU protocol.

##### Parameters

*   `apdu` **[Buffer](https://nodejs.org/api/buffer.html)** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Buffer](https://nodejs.org/api/buffer.html)>** a promise of apdu response

#### isSupported

#### list

#### listen

##### Parameters

*   `observer` **Observer\<ListenDescriptorEvent>** 

Returns **Subscription** 

#### autoDisconnect

convenience wrapper for auto-disconnect logic

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<void>** 

#### disconnect

globally disconnect the transport singleton

#### open

Connects to the first Ledger device connected via USB

Reusing the same TransportNodeHidSingleton instance until a disconnection happens.
Pitfall: this implementation only handles 1 device connected via USB

Legacy: `_descriptor` is needed to follow the Transport definition

##### Parameters

*   `_descriptor` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
*   `_timeoutMs` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** 
*   `context` **TraceContext?** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[TransportNodeHidSingleton](#transportnodehidsingleton)>** 
