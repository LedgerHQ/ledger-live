## trustchain

Ledger Live trustchain layer.

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [getSdk](#getsdk)
    *   [Parameters](#parameters)
*   [createQRCodeHostInstance](#createqrcodehostinstance)
    *   [Parameters](#parameters-1)
*   [onDisplayQRCode](#ondisplayqrcode)
*   [onDisplayDigits](#ondisplaydigits)
*   [addMember](#addmember)
*   [createQRCodeCandidateInstance](#createqrcodecandidateinstance)
    *   [Parameters](#parameters-2)
*   [liveCredentials](#livecredentials)
*   [memberName](#membername)
*   [scannedUrl](#scannedurl)
*   [onRequestQRCodeInput](#onrequestqrcodeinput)
*   [LiveCredentials](#livecredentials-1)
*   [TrustchainSDK](#trustchainsdk)
    *   [Examples](#examples)
    *   [initLiveCredentials](#initlivecredentials)
    *   [seedIdAuthenticate](#seedidauthenticate)
        *   [Parameters](#parameters-3)
    *   [liveAuthenticate](#liveauthenticate)
        *   [Parameters](#parameters-4)
    *   [getOrCreateTrustchain](#getorcreatetrustchain)
        *   [Parameters](#parameters-5)
    *   [restoreTrustchain](#restoretrustchain)
        *   [Parameters](#parameters-6)
    *   [getMembers](#getmembers)
        *   [Parameters](#parameters-7)
    *   [removeMember](#removemember)
        *   [Parameters](#parameters-8)
    *   [addMember](#addmember-1)
        *   [Parameters](#parameters-9)
    *   [destroyTrustchain](#destroytrustchain)
        *   [Parameters](#parameters-10)
    *   [encryptUserData](#encryptuserdata)
        *   [Parameters](#parameters-11)
    *   [decryptUserData](#decryptuserdata)
        *   [Parameters](#parameters-12)

### getSdk

Get an implementation of a TrustchainSDK

#### Parameters

*   `isMockEnv` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**&#x20;
*   `context` **TrustchainSDKContext**&#x20;

Returns **[TrustchainSDK](#trustchainsdk)**&#x20;

### createQRCodeHostInstance

establish a channel to be able to add a member to the trustchain after displaying the QR Code

#### Parameters

*   `$0` **{onDisplayQRCode: function (url: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): void, onDisplayDigits: function (digits: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): void, addMember: function (member: TrustchainMember): [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<Trustchain>}**&#x20;

    *   `$0.onDisplayQRCode` &#x20;
    *   `$0.onDisplayDigits` &#x20;
    *   `$0.addMember` &#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<void>** a promise that resolves when this is done

### onDisplayQRCode

this function will need to display a UI to show the QR Code

Type: function (url: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): void

### onDisplayDigits

this function will need to display a UI to show the digits

Type: function (digits: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): void

### addMember

this function will need to using the TrustchainSDK (and use sdk.addMember)

Type: function (member: TrustchainMember): [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<Trustchain>

### createQRCodeCandidateInstance

establish a channel to be able to add myself to the trustchain after scanning the QR Code

#### Parameters

*   `$0` **{liveCredentials: [LiveCredentials](#livecredentials), memberName: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), scannedUrl: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), onRequestQRCodeInput: function (config: {digits: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), connected: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)}, callback: function (digits: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): void): void}**&#x20;

    *   `$0.liveCredentials` &#x20;
    *   `$0.memberName` &#x20;
    *   `$0.scannedUrl` &#x20;
    *   `$0.onRequestQRCodeInput` &#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<Trustchain>** a promise that resolves a Trustchain when this is done

### liveCredentials

the live credentials of the live instance (given by TrustchainSDK)

Type: [LiveCredentials](#livecredentials)

### memberName

the name of the member

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### scannedUrl

the scanned URL that contains the host public key

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### onRequestQRCodeInput

this function will need to display a UI to ask the user to input the digits
and then call the callback with the digits

Type: function (config: {digits: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), connected: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)}, callback: function (digits: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): void): void

### LiveCredentials

This exports all the logic related to the Trustchain store.
The Trustchain store is a store that contains the data related to trustchain.
It essentially is the ledger live's credentials that are only stored on the
client side and the trustchain returned by the backend.

### TrustchainSDK

The main interface for the UI to interact with the trustchain protocol.

#### Examples

```javascript
import { sdk } from "@ledgerhq/trustchain";

sdk.seedIdAuthenticate(transport).then(jwt => console.log(jwt));
```

#### initLiveCredentials

Generate the live credentials that represents a Live instance, member of the trustchain.
This method is expected to be used the first time Ledger Live is opened (if Live never generated them before) and then persisted over the future user sessions of Ledger Live in order for the member to be able to authenticate and manage the trustchain.

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[LiveCredentials](#livecredentials)>**&#x20;

#### seedIdAuthenticate

Auth with a hardware wallet at the trustchain root level.
The returned token will typically be used to create/manage the trustchain.

##### Parameters

*   `transport` **Transport**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<JWT>**&#x20;

#### liveAuthenticate

Auth with Live credentials.
A trustchain must have been created and the Live instance must have been added as a member.
The returned token will typically be used for regular operations like wallet sync.

##### Parameters

*   `trustchain` **Trustchain**&#x20;
*   `liveInstanceCredentials` **[LiveCredentials](#livecredentials)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<JWT>**&#x20;

#### getOrCreateTrustchain

This method will either create the required trustchains (root and application) or restore them.
The returned trustchain will be initialized on the root level and also will have the branch derivation corresponding to the contextual applicationId.
It will also have the wallet sync encryption key initialized.
The latest jwt is also returned because it was potentially updated during the process.

##### Parameters

*   `transport` **Transport**&#x20;
*   `seedIdToken` **JWT**&#x20;
*   `liveInstanceCredentials` **[LiveCredentials](#livecredentials)**&#x20;
*   `topic` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)?**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<{trustchain: Trustchain, jwt: JWT}>**&#x20;

#### restoreTrustchain

Restore the current trustchain encryption key, typically due to a key rotation.

##### Parameters

*   `liveJWT` **JWT**&#x20;
*   `trustchainId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)**&#x20;
*   `liveInstanceCredentials` **[LiveCredentials](#livecredentials)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<Trustchain>**&#x20;

#### getMembers

list the current members of the application trustchain

##### Parameters

*   `liveJWT` **JWT**&#x20;
*   `trustchain` **Trustchain**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)\<TrustchainMember>>**&#x20;

#### removeMember

remove a member from the application trustchain

##### Parameters

*   `transport` **Transport**&#x20;
*   `seedIdToken` **JWT**&#x20;
*   `trustchain` **Trustchain**&#x20;
*   `liveInstanceCredentials` **[LiveCredentials](#livecredentials)**&#x20;
*   `member` **TrustchainMember**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<Trustchain>**&#x20;

#### addMember

add a member to the application trustchain

##### Parameters

*   `liveJWT` **JWT**&#x20;
*   `trustchain` **Trustchain**&#x20;
*   `liveInstanceCredentials` **[LiveCredentials](#livecredentials)**&#x20;
*   `member` **TrustchainMember**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<void>**&#x20;

#### destroyTrustchain

TBD

##### Parameters

*   `trustchain` **Trustchain**&#x20;
*   `liveJWT` **JWT**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<void>**&#x20;

#### encryptUserData

encrypt data with the trustchain encryption key

##### Parameters

*   `trustchain` **Trustchain**&#x20;
*   `obj` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)>**&#x20;

#### decryptUserData

decrypt data with the trustchain encryption key

##### Parameters

*   `trustchain` **Trustchain**&#x20;
*   `data` **[Uint8Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)**&#x20;

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)>**&#x20;
