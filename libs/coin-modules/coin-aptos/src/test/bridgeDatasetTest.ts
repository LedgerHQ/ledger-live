import { CurrenciesData, DatasetTest } from "@ledgerhq/types-live";
import BigNumber from "bignumber.js";
import { fromTransactionRaw } from "../bridge/transaction";
import { Transaction } from "../types";

const aptos: CurrenciesData<Transaction> = {
  scanAccounts: [
    {
      name: "aptos seed 1",
      apdus: `
      => 5b0500000d038000002c8000027d80000000
      <= 210430cfd94a543eca9ba9d26eafe07f6c28e1e43e4768f3c0bad32efeced8662f8720b44227ab88ddefa2ff5deb5e366c70e8b703aec381de39b103dd50eabf8d9d119000
      => 5b05000015058000002c8000027d800000008000000080000000
      <= 21044b16bdc2f72ea4502a8c4879c72e71d4d1a8ec46c43620e00a6f46e0b7569c6b20ba21e074c2bd6b307a35c85afd6ad40dc8319af9ec11660c588ffd3e413773259000
      => 5b05000015058000002c8000027d800000018000000080000000
      <= 21049aec773c4b645bba274924e2e8aeea525ba37051c94bfd922b60c87b1692091e207fa1d1caa1209d35fafe59393bc820bb7b0b81f3a808dd3728e0b1347bfff40e9000
      => 5b05000015058000002c8000027d800000028000000080000000
      <= 21041fb77263c646810574525025561e4559c338b571f57f1b513d75b1609d5fa5f6205e9117d152b467fac631d742ddbc31ea3cbcaac51273c1e931058a56e983d9f59000
      => 5b05000015058000002c8000027d800000038000000080000000
      <= 21045cb5a27ce3c7ec313c87d000641f638d040abf77a0388a41f2dd6f1ecd025a1e2047ef3469dfd2b29fb56c869e22b5008bd15794d1a99d0c040cf7607e863383c09000
      => 5b05000015058000002c8000027d800000048000000080000000
      <= 21045a153998934f984035e23847cdc020487440e50ecf58adc0107e90e64e10c796209246e7920fd736b6c488cb7dc4642dcd947ec02ce075453ba781cd3a322a7f809000
      `,
    },
  ],
  accounts: [
    {
      raw: {
        id: "js:2:aptos:4b16bdc2f72ea4502a8c4879c72e71d4d1a8ec46c43620e00a6f46e0b7569c6b:",
        seedIdentifier: "30cfd94a543eca9ba9d26eafe07f6c28e1e43e4768f3c0bad32efeced8662f87",
        used: true,
        derivationMode: "",
        index: 0,
        freshAddress: "0xb69a68cc64f7aa193705193f4dd598320a0a74baf7e4b50c9980c5bd60a82390",
        freshAddressPath: "44'/637'/0'/0/0",
        blockHeight: 286032295,
        creationDate: "2024-11-21T14:40:11.085Z",
        operationsCount: 38,
        operations: [],
        pendingOperations: [],
        currencyId: "aptos",
        lastSyncDate: "2025-02-04T12:04:38.064Z",
        balance: "4731550",
        spendableBalance: "4731550",
        balanceHistoryCache: {
          HOUR: {
            balances: [
              9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900,
              9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900,
              9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900, 9593900,
              9593900, 9593900, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4786050,
              4786050, 4786050, 4786050, 4775150, 4775150, 4775150, 4775150, 4775150, 4775150,
              4775150, 4775150, 4775150, 4775150, 4775150, 4775150, 4775150, 4775150, 4775150,
              4775150, 4775150, 4775150, 4775150, 4775150, 4775150, 4775150, 4775150, 4775150,
              4775150, 4753350, 4753350, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4742450,
              4742450, 4742450, 4742450, 4742450, 4742450, 4742450, 4731550, 4731550, 4731550,
              4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550,
              4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550,
              4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550, 4731550,
              4731550,
            ],
            latestDate: 1738670400000,
          },
          DAY: {
            balances: [
              0, 10000000, 10000000, 10000000, 10000000, 10000000, 10000000, 10000000, 10000000,
              10000000, 10000000, 10000000, 10000000, 10000000, 10000000, 10000000, 9989100,
              9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100,
              9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100,
              9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100, 9989100,
              9956400, 9956400, 9956400, 9779200, 9681100, 9648400, 9637500, 9626600, 9626600,
              9626600, 9626600, 9604800, 9604800, 9604800, 9604800, 9604800, 9604800, 9604800,
              9604800, 9604800, 9593900, 9593900, 9593900, 9593900, 9593900, 0, 4775150, 4742450,
              4742450, 4742450, 4742450, 4731550,
            ],
            latestDate: 1738627200000,
          },
          WEEK: {
            balances: [
              0, 10000000, 10000000, 9989100, 9989100, 9989100, 9989100, 9956400, 9626600, 9604800,
              9593900, 4742450,
            ],
            latestDate: 1738454400000,
          },
        },
        xpub: "4b16bdc2f72ea4502a8c4879c72e71d4d1a8ec46c43620e00a6f46e0b7569c6b",
        swapHistory: [],
      },
      transactions: [
        {
          name: "NO_NAME",
          transaction: fromTransactionRaw({
            amount: "10000",
            recipient: "0x98739115d8ba968aa0870a1ce6a988a0cb5aeb2e5f0cb5a0f346c7a1bb7e4a27",
            useAllAmount: false,
            subAccountId: null,
            family: "aptos",
            mode: "send",
            fees: "900",
            options: '{"maxGasAmount":"9","gasUnitPrice":"100"}',
            errors: "{}",
          }),
          expectedStatus: () =>
            // you can use account and transaction for smart logic. drop the =>fn otherwise
            ({
              errors: {},
              warnings: {},
              estimatedFees: BigNumber("900"),
              amount: BigNumber("10000"),
              totalSpent: BigNumber("10900"),
            }),
        },
      ],
    },
  ],
};

export const dataset: DatasetTest<Transaction> = {
  implementations: ["js"],
  currencies: {
    aptos,
  },
};
