# Epic 1 Retrospective: Core API & Account Queries

**Date:** 2026-01-30  
**Epic:** 1 - Core API & Account Queries  
**Status:** Complete  
**FRs Covered:** FR1, FR2, FR3, FR4, FR20, FR21, FR22, FR23

---

## Team Participants

- Bob (Scrum Master) - Facilitator
- Alice (Product Owner)
- Charlie (Senior Dev)
- Dana (QA Engineer)
- Elena (Junior Dev)
- Hedi.edelbloute (Project Lead)

---

## Epic Summary

### Delivery Metrics

| Metric | Value |
|--------|-------|
| Stories Completed | 5/5 (100%) |
| Functional Requirements Covered | 8 |
| Unit Tests | 56+ |
| Integration Tests | 15+ |
| Blockers Encountered | 0 |
| Technical Debt Items | 0 |
| Code Review Issues Found & Fixed | 26 |

### Stories Delivered

| Story | Title | Code Review Issues |
|-------|-------|-------------------|
| 1.1 | API Factory & Configuration | 3 |
| 1.2 | Native EGLD Balance Query | 4 |
| 1.3 | ESDT Token Balance Query | 7 |
| 1.4 | Account Sequence Query | 10 |
| 1.5 | Block Information & Unsupported Methods | 2 |

### Business Outcomes

- ‚úÖ `createApi()` factory function working and exported
- ‚úÖ Balance queries (native EGLD + ESDT tokens) fully functional
- ‚úÖ Account sequence (nonce) retrieval working
- ‚úÖ Block height retrieval working
- ‚úÖ "Not supported" methods properly documented (getBlock, getBlockInfo, getRewards, craftRawTransaction)

---

## What Went Well

### Successes

1. **Clean architecture following coin-filecoin reference pattern**
   - Every story had a clear template to follow
   - Consistent patterns reduced cognitive load

2. **ADR compliance throughout**
   - ADR-001: Data transformation via mappers
   - ADR-003: Error handling format (`"{methodName} is not supported"`)
   - ADR-004: Unified ESDT token handling with `asset.type` discrimination
   - ADR-005: Single integration test file

3. **Integration test infrastructure established (Story 1.3)**
   - `jest.integ.config.js` created
   - `pnpm test-integ` script added
   - Pattern reused in Stories 1.4 and 1.5

4. **Zero blockers, zero technical debt**
   - No external dependencies blocked progress
   - All code review issues addressed before completion

5. **Code review process caught 26 issues before completion**
   - Process working as intended
   - Issues fixed during development, not after

6. **100% story completion**
   - All 5 stories delivered
   - All acceptance criteria met

---

## What Didn't Go Well

### Challenges

1. **Module exports consistently missed (3/5 stories)**
   - Stories 1.1, 1.3, 1.4 had missing exports in `logic/index.ts`
   - New functions created but not exported
   - Caught during code review

2. **Input validation added reactively during code review**
   - Address validation not in initial implementations
   - Added during code review for Stories 1.2 and 1.4

3. **Test commands not prominently documented**
   - `pnpm test`, `pnpm test-integ`, `pnpm coverage` not in README
   - Developers had to check `package.json`

4. **Coverage checks happening late in development cycle**
   - Coverage gaps found during code review
   - Should be checked before submitting for review

### Patterns Identified

| Pattern | Stories Affected | Root Cause |
|---------|-----------------|------------|
| Missing module exports | 1.1, 1.3, 1.4 | No explicit checklist item |
| Late validation addition | 1.2, 1.4 | Validation not in task list |
| Coverage gaps | 1.2, 1.3, 1.4 | Coverage not run pre-review |

---

## Key Insights

1. **Story 1.4 had most code review issues (10)**
   - Suggests validation patterns weren't established early enough
   - Later stories benefited from patterns established earlier

2. **Infrastructure work in Story 1.3 paid dividends**
   - Integration test setup reused in Stories 1.4 and 1.5
   - Investment in tooling reduces friction

3. **Consistent patterns reduce cognitive load**
   - Mappers, ADRs, file structure all followed established patterns
   - Developers could focus on business logic

4. **Testing Commands**
   - `pnpm test` - Run unit tests
   - `pnpm test-integ` - Run integration tests
   - `pnpm coverage` - Run coverage checks

---

## Action Items

### Process Improvements

| # | Action Item | Owner | Deadline | Success Criteria |
|---|-------------|-------|----------|------------------|
| 1 | Add testing commands to README | Dev Team | Before Epic 2 Story 2.1 | Commands documented with examples |
| 2 | Run `pnpm coverage` before code review | Dev Team | Ongoing | Coverage checked in every story |
| 3 | Verify module exports when creating new functions | Dev Team | Ongoing | Checklist item in story tasks |
| 4 | Add input validation early (not during code review) | Dev Team | Ongoing | Validation in initial implementation |

### Team Agreements

- ‚úì Every new logic function gets exported in `logic/index.ts` immediately
- ‚úì Run `pnpm coverage` before code review submission
- ‚úì Address validation uses existing `isValidAddress` pattern
- ‚úì Error messages follow ADR-003 format: `"Failed to fetch account ${address}: ${message}"`

---

## Next Epic Preparation

### Epic 2: Operations History

**Status:** Ready to start  
**FRs Covered:** FR5, FR6, FR7  
**Stories:** 3

**Dependencies on Epic 1 (all complete):**
- ‚úÖ `createApi()` factory
- ‚úÖ Logic module structure (`src/logic/`)
- ‚úÖ Mapper pattern (`mapToBalance`, `mapToEsdtBalance`)
- ‚úÖ Integration test infrastructure (`jest.integ.config.js`)
- ‚úÖ Address validation pattern (`isValidAddress`)

**Risk Areas to Watch:**
- ‚ö†Ô∏è Pagination edge cases (offset, limit, last page, empty results)
- ‚ö†Ô∏è Consistent sorting across paginated requests

**Preparation Tasks:**
1. Verify MultiversX explorer API pagination behavior (during Story 2.1)
2. Add pagination edge case tests to acceptance criteria

---

## Readiness Assessment

| Area | Status | Notes |
|------|--------|-------|
| Testing & Quality | ‚úÖ Complete | 56+ unit tests, 15+ integration tests |
| Code Review | ‚úÖ Complete | 26 issues found and fixed |
| Technical Health | ‚úÖ Stable | Codebase feels solid |
| Branch Status | üìã Feature branch | `support/gen-ai-workshop-coin-modules` |
| Blockers | ‚úÖ None | |
| Technical Debt | ‚úÖ None | |

**Conclusion:** Epic 1 is fully complete and ready for Epic 2 to begin.

---

## Retrospective Metadata

- **Retrospective Date:** 2026-01-30
- **Facilitator:** Bob (Scrum Master)
- **Duration:** ~30 minutes
- **Format:** Team discussion with structured sections
- **Previous Retrospective:** N/A (first epic)
