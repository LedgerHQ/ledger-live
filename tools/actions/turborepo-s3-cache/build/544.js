"use strict";const __rslib_import_meta_url__="u"<typeof document?new(require("url".replace("",""))).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("main.js",document.baseURI).href;exports.ids=["544"],exports.modules={"../../../node_modules/.pnpm/@aws-sdk+credential-provider-http@3.649.0/node_modules/@aws-sdk/credential-provider-http/dist-es/index.js"(e,t,o){o.d(t,{fromHttp:()=>p});var r=o("../../../node_modules/.pnpm/@smithy+node-http-handler@3.2.0/node_modules/@smithy/node-http-handler/dist-es/index.js"),s=o("../../../node_modules/.pnpm/@smithy+property-provider@3.1.4/node_modules/@smithy/property-provider/dist-es/index.js"),n=o("fs/promises"),i=o.n(n),a=o("../../../node_modules/.pnpm/@smithy+protocol-http@4.1.1/node_modules/@smithy/protocol-http/dist-es/index.js"),d=o("../../../node_modules/.pnpm/@smithy+smithy-client@3.3.0/node_modules/@smithy/smithy-client/dist-es/index.js"),l=o("../../../node_modules/.pnpm/@smithy+util-stream@3.1.4/node_modules/@smithy/util-stream/dist-es/index.js");async function c(e,t){let o=(0,l.c9)(e.body),r=await o.transformToString();if(200===e.statusCode){let e=JSON.parse(r);if("string"!=typeof e.AccessKeyId||"string"!=typeof e.SecretAccessKey||"string"!=typeof e.Token||"string"!=typeof e.Expiration)throw new s.C1("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:(0,d.EI)(e.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(r)}catch(e){}throw Object.assign(new s.C1(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new s.C1(`Server responded with status: ${e.statusCode}`,{logger:t})}let p=(e={})=>{let t,o,n,d;e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let l=e.awsContainerCredentialsRelativeUri??process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI,p=e.awsContainerCredentialsFullUri??process.env.AWS_CONTAINER_CREDENTIALS_FULL_URI,h=e.awsContainerAuthorizationToken??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,m=e.awsContainerAuthorizationTokenFile??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE,u=e.logger?.constructor?.name!=="NoOpLogger"&&e.logger?e.logger.warn:console.warn;if(l&&p&&(u("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),u("awsContainerCredentialsFullUri will take precedence.")),h&&m&&(u("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),u("awsContainerAuthorizationToken will take precedence.")),p)t=p;else if(l)t=`http://169.254.170.2${l}`;else throw new s.C1(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let w=new URL(t);((e,t)=>{if("https:"!==e.protocol&&"169.254.170.2"!==e.hostname&&"169.254.170.23"!==e.hostname&&"[fd00:ec2::23]"!==e.hostname){if(e.hostname.includes("[")){if("[::1]"===e.hostname||"[0000:0000:0000:0000:0000:0000:0000:0001]"===e.hostname)return}else{if("localhost"===e.hostname)return;let t=e.hostname.split("."),o=e=>{let t=parseInt(e,10);return 0<=t&&t<=255};if("127"===t[0]&&o(t[1])&&o(t[2])&&o(t[3])&&4===t.length)return}throw new s.C1(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}})(w,e.logger);let _=new r.$c({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return o=async()=>{let t=new a.Kd({protocol:w.protocol,hostname:w.hostname,port:Number(w.port),path:w.pathname,query:Array.from(w.searchParams.entries()).reduce((e,[t,o])=>(e[t]=o,e),{}),fragment:w.hash});h?t.headers.Authorization=h:m&&(t.headers.Authorization=(await i().readFile(m)).toString());try{let e=await _.handle(t);return c(e.response)}catch(t){throw new s.C1(String(t),{logger:e.logger})}},n=e.maxRetries??3,d=e.timeout??1e3,async()=>{for(let e=0;e<n;++e)try{return await o()}catch(e){await new Promise(e=>setTimeout(e,d))}return await o()}}}};